<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeCut - O corte perfeito, a um clique de você</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        .wecut-shadow {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .wecut-button-hover:hover {
            transform: translateY(-1px);
            transition: all 0.2s ease;
        }
        .hidden {
            display: none;
        }
        .active-page {
            display: block;
        }
        .active-nav {
            background-color: #f9fafb;
        }
    </style>
</head>
<body class="min-h-screen bg-white">
    <!-- Navigation -->
    <nav id="navigation" class="border-b border-gray-200 bg-white wecut-shadow">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center cursor-pointer" id="logo">
                    <h1 class="text-2xl font-medium text-black">WeCut</h1>
                    <span class="ml-3 text-sm text-gray-600 hidden sm:block">O corte perfeito, a um clique de você</span>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-8" id="desktop-nav">
                    <!-- Client Navigation -->
                    <div id="client-nav">
                        <button class="px-3 py-2 rounded-md text-sm font-medium text-black hover:bg-gray-50 wecut-button-hover nav-link" data-view="home-page">Início</button>
                        <button class="px-3 py-2 rounded-md text-sm font-medium text-black hover:bg-gray-50 wecut-button-hover nav-link" data-view="search-page">
                            <i data-lucide="search" class="w-4 h-4 inline mr-2"></i>
                            Buscar
                        </button>
                        <button class="px-3 py-2 rounded-md text-sm font-medium text-black hover:bg-gray-50 wecut-button-hover nav-link" data-view="appointments-page">
                            <i data-lucide="calendar" class="w-4 h-4 inline mr-2"></i>
                            Agendamentos
                        </button>
                    </div>
                    
                    <!-- Professional Navigation -->
                    <div id="professional-nav" class="hidden">
                        <button class="px-3 py-2 rounded-md text-sm font-medium text-black hover:bg-gray-50 wecut-button-hover nav-link" data-view="professional-dashboard-page">Dashboard</button>
                        <button class="px-3 py-2 rounded-md text-sm font-medium text-black hover:bg-gray-50 wecut-button-hover nav-link" data-view="professional-dashboard-page">
                            <i data-lucide="calendar" class="w-4 h-4 inline mr-2"></i>
                            Agenda
                        </button>
                        <button class="px-3 py-2 rounded-md text-sm font-medium text-black hover:bg-gray-50 wecut-button-hover nav-link" data-view="professional-dashboard-page">
                            <i data-lucide="user" class="w-4 h-4 inline mr-2"></i>
                            Perfil
                        </button>
                    </div>

                    <!-- Admin Navigation -->
                    <div id="admin-nav" class="hidden">
                        <button class="px-3 py-2 rounded-md text-sm font-medium text-black hover:bg-gray-50 wecut-button-hover nav-link" data-view="admin-dashboard-page">Dashboard Admin</button>
                        <button class="px-3 py-2 rounded-md text-sm font-medium text-black hover:bg-gray-50 wecut-button-hover nav-link" data-view="admin-dashboard-page">
                            <i data-lucide="users" class="w-4 h-4 inline mr-2"></i>
                            Salões
                        </button>
                        <button class="px-3 py-2 rounded-md text-sm font-medium text-black hover:bg-gray-50 wecut-button-hover nav-link" data-view="admin-dashboard-page">
                            <i data-lucide="settings" class="w-4 h-4 inline mr-2"></i>
                            Configurações
                        </button>
                    </div>
                </div>

                <!-- Right Side - Auth and User Type -->
                <div class="flex items-center space-x-4">
                    <!-- Auth Buttons (não logado) -->
                    <div class="hidden sm:flex items-center space-x-2" id="auth-buttons">
                        <button class="px-4 py-2 text-sm text-black hover:bg-gray-50 rounded-md wecut-button-hover" id="login-btn">Entrar</button>
                        <button class="px-4 py-2 text-sm bg-black text-white hover:bg-gray-800 rounded-md wecut-button-hover" id="signup-btn">Cadastrar</button>
                    </div>

                    <!-- User Menu (logado) -->
                    <div id="user-menu" class="hidden">
                        <div class="flex items-center space-x-2">
                            <span id="user-name" class="text-sm text-black"></span>
                            <button id="logout-btn" class="px-3 py-1 text-sm text-black hover:bg-gray-50 rounded-md wecut-button-hover">Sair</button>
                        </div>
                    </div>

                    <!-- Mobile Menu -->
                    <button class="md:hidden text-black hover:bg-gray-50 p-2 rounded-md" id="mobile-menu-btn">
                        <i data-lucide="menu" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Page Sections -->
    <div id="page-container">
        <!-- Conteúdo será carregado dinamicamente via JavaScript -->
    </div>

    <!-- Modals -->
    <div id="professional-details-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 id="professional-details-title" class="text-xl font-bold text-black">Detalhes do Profissional</h3>
                <button onclick="closeProfessionalDetailsModal()" class="text-gray-500 hover:text-gray-700">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <div id="professional-details-content" class="space-y-4">
                <!-- Conteúdo será preenchido dinamicamente -->
            </div>
            <div class="mt-6 flex justify-end space-x-3">
                <button id="remove-from-details" class="bg-red-600 text-white hover:bg-red-700 px-4 py-2 rounded wecut-button-hover">
                    Remover Profissional
                </button>
                <button onclick="closeProfessionalDetailsModal()" class="border border-gray-300 hover:bg-gray-50 px-4 py-2 rounded wecut-button-hover">
                    Fechar
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts Globais -->
    <script>
        // State Manager
        class StateManager {
            constructor() {
                this.state = {
                    currentUser: null,
                    users: [],
                    professionals: [],
                    salons: [],
                    appointments: [],
                    adminTab: 'professionals',
                    professionalTab: 'pending',
                    bookingProfessionalId: null
                };
            }

            init() {
                const savedState = localStorage.getItem('wecut-state');
                if (savedState) {
                    const parsedState = JSON.parse(savedState);
                    this.state = { ...this.state, ...parsedState };
                } else {
                    this.loadSampleData();
                }
                this.saveState();
            }

            loadSampleData() {
                this.state.users = [
                    { id: 1, name: 'Cliente Teste', email: 'client@example.com', type: 'client', password: 'client123' },
                    { id: 2, name: 'Admin', email: 'admin@example.com', type: 'admin', password: 'admin123' },
                    { id: 3, name: 'João Silva', email: 'pro@example.com', type: 'professional', password: 'pro123' }
                ];

                this.state.salons = [
                    {
                        id: 1,
                        userId: 3,
                        name: 'Barbearia Clássica',
                        location: 'Maputo',
                        phone: '+258 84 123 4567',
                        address: 'Av. Julius Nyerere, 123 - Polana, Maputo',
                        services: ['Corte Masculino', 'Barba'],
                        openingHours: { opening: '09:00', closing: '18:00' },
                        photos: [],
                        submittedAt: new Date().toISOString()
                    }
                ];

                this.state.professionals = [
                    {
                        id: 1,
                        userId: 3,
                        salonId: 1,
                        name: 'João Silva',
                        specialty: 'Cabelereiro Profissional',
                        description: 'Especialista em cortes masculinos clássicos e contemporâneos',
                        services: ['Corte Masculino', 'Barba', 'Corte + Barba'],
                        rating: 4.9,
                        reviews: 128,
                        image: 'https://images.unsplash.com/photo-1562322140-8baeececf3df?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8aGFpcmRyZXNzZXJ8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60',
                        price: '45,00 MT',
                        location: 'Maputo',
                        status: 'approved'
                    },
                    {
                        id: 2,
                        userId: 4,
                        salonId: 2,
                        name: 'Maria Santos',
                        specialty: 'Especialista em Coloração',
                        description: 'Profissional especializada em coloração e tratamentos capilares',
                        services: ['Corte Feminino', 'Coloração', 'Tratamentos'],
                        rating: 4.8,
                        reviews: 95,
                        image: 'https://images.unsplash.com/photo-1595476108010-b4d1f102b1b1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGhhaXJkcmVzc2VyfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60',
                        price: '85,00 MT',
                        location: 'Matola',
                        status: 'approved'
                    }
                ];

                this.state.appointments = [
                    {
                        id: 1,
                        professionalId: 1,
                        clientName: 'Cliente Teste',
                        service: 'Corte Masculino',
                        date: new Date().toISOString(),
                        time: '14:00',
                        price: '45,00 MT',
                        status: 'pending',
                        code: 'WC001',
                        location: 'Maputo',
                        phone: '+258 84 123 4567',
                        address: 'Av. Julius Nyerere, 123 - Polana, Maputo',
                        image: 'https://images.unsplash.com/photo-1562322140-8baeececf3df?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8aGFpcmRyZXNzZXJ8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60'
                    }
                ];
            }

            setCurrentUser(user) {
                this.state.currentUser = user;
                this.saveState();
            }

            addUser(userData) {
                const newUser = {
                    id: Date.now(),
                    ...userData
                };
                this.state.users.push(newUser);
                this.saveState();
                return newUser;
            }

            addSalon(salonData) {
                const newSalon = {
                    id: Date.now(),
                    ...salonData,
                    photos: salonData.photos || []
                };
                this.state.salons.push(newSalon);
                this.saveState();
                return newSalon;
            }

            addProfessional(professionalData) {
                const newProfessional = {
                    id: Date.now(),
                    ...professionalData
                };
                this.state.professionals.push(newProfessional);
                this.saveState();
                return newProfessional;
            }

            addAppointment(appointmentData) {
                const newAppointment = {
                    id: Date.now(),
                    code: 'WC' + String(this.state.appointments.length + 1).padStart(3, '0'),
                    ...appointmentData
                };
                this.state.appointments.push(newAppointment);
                this.saveState();
                return newAppointment;
            }

            getApprovedProfessionals() {
                return this.state.professionals.filter(pro => pro.status === 'approved');
            }

            getProfessionalAppointments(professionalId) {
                return this.state.appointments.filter(apt => apt.professionalId === professionalId);
            }

            updateAppointmentStatus(appointmentId, status) {
                const appointment = this.state.appointments.find(apt => apt.id === appointmentId);
                if (appointment) {
                    appointment.status = status;
                    this.saveState();
                    return true;
                }
                return false;
            }

            removeProfessional(professionalId) {
                const index = this.state.professionals.findIndex(p => p.id === professionalId);
                if (index !== -1) {
                    this.state.professionals.splice(index, 1);
                    this.saveState();
                    return true;
                }
                return false;
            }

            setAdminTab(tab) {
                this.state.adminTab = tab;
                this.saveState();
            }

            setProfessionalTab(tab) {
                this.state.professionalTab = tab;
                this.saveState();
            }

            saveState() {
                localStorage.setItem('wecut-state', JSON.stringify(this.state));
            }

            // Método para autenticar usuário
            authenticateUser(email, password) {
                return this.state.users.find(user => 
                    user.email === email && user.password === password
                );
            }

            // Verificar se email já existe
            userExists(email) {
                return this.state.users.some(user => user.email === email);
            }

            // Método para atualizar salão existente
            updateSalon(salonId, updates) {
                const salonIndex = this.state.salons.findIndex(s => s.id === salonId);
                if (salonIndex !== -1) {
                    this.state.salons[salonIndex] = { ...this.state.salons[salonIndex], ...updates };
                    this.saveState();
                    return true;
                }
                return false;
            }

            // Método para atualizar profissional existente
            updateProfessional(professionalId, updates) {
                const proIndex = this.state.professionals.findIndex(p => p.id === professionalId);
                if (proIndex !== -1) {
                    this.state.professionals[proIndex] = { ...this.state.professionals[proIndex], ...updates };
                    this.saveState();
                    return true;
                }
                return false;
            }
        }

        const stateManager = new StateManager();

        // Funções de Navegação e UI
        function initNavbarListeners() {
            document.querySelectorAll('.nav-link').forEach(button => {
                button.addEventListener('click', function() {
                    const viewName = this.getAttribute('data-view');
                    renderView(viewName);
                });
            });

            document.getElementById('logo').addEventListener('click', function() {
                renderView('home-page');
            });

            document.getElementById('login-btn')?.addEventListener('click', function() {
                renderView('login-page');
            });

            document.getElementById('signup-btn')?.addEventListener('click', function() {
                renderView('login-page');
                setTimeout(() => {
                    showRegisterForm();
                }, 100);
            });

            document.getElementById('logout-btn')?.addEventListener('click', function() {
                handleLogout();
            });
        }

        function handleLogout() {
            stateManager.setCurrentUser(null);
            renderView('home-page');
            updateAuthUI();
        }

        function updateAuthUI() {
            const authButtons = document.getElementById('auth-buttons');
            const userMenu = document.getElementById('user-menu');

            if (stateManager.state.currentUser) {
                if (authButtons) authButtons.classList.add('hidden');
                if (userMenu) userMenu.classList.remove('hidden');
                
                const userName = document.getElementById('user-name');
                if (userName) userName.textContent = stateManager.state.currentUser.name;
                updateUserTypeNavigation();
            } else {
                if (authButtons) authButtons.classList.remove('hidden');
                if (userMenu) userMenu.classList.add('hidden');
            }
        }

        function updateUserTypeNavigation() {
            const clientNav = document.getElementById('client-nav');
            const professionalNav = document.getElementById('professional-nav');
            const adminNav = document.getElementById('admin-nav');

            if (clientNav) clientNav.classList.add('hidden');
            if (professionalNav) professionalNav.classList.add('hidden');
            if (adminNav) adminNav.classList.add('hidden');

            if (stateManager.state.currentUser?.type === 'client') {
                if (clientNav) clientNav.classList.remove('hidden');
            } else if (stateManager.state.currentUser?.type === 'professional') {
                if (professionalNav) professionalNav.classList.remove('hidden');
            } else if (stateManager.state.currentUser?.type === 'admin') {
                if (adminNav) adminNav.classList.remove('hidden');
            }
        }

        // Funções de Autenticação
        function handleLogin(event) {
            console.log('🔐 Tentando fazer login...');
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const email = document.getElementById('email')?.value;
            const password = document.getElementById('password')?.value;

            if (!email || !password) {
                alert('Por favor, preencha todos os campos');
                return;
            }

            try {
                const user = stateManager.authenticateUser(email, password);
                
                if (user) {
                    stateManager.setCurrentUser(user);
                    
                    // Redirecionamento baseado no tipo de usuário
                    if (user.type === 'admin') {
                        renderView('admin-dashboard-page');
                    } else if (user.type === 'professional') {
                        renderView('professional-dashboard-page');
                    } else {
                        renderView('search-page');
                    }
                    
                    updateAuthUI();
                    alert(`✅ Login realizado com sucesso! Bem-vindo(a), ${user.name}`);
                } else {
                    alert('❌ E-mail ou senha incorretos');
                }
            } catch (error) {
                console.error('Erro no login:', error);
                alert('Erro ao fazer login. Tente novamente.');
            }
        }

        async function handleRegister(event) {
            console.log('📝 Processando cadastro...');
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const userType = document.querySelector('input[name="userType"]:checked')?.value;
            const name = document.getElementById('register-name')?.value;
            const email = document.getElementById('register-email')?.value;
            const password = document.getElementById('register-password')?.value;

            if (!name || !email || !password) {
                alert('Por favor, preencha todos os campos obrigatórios');
                return;
            }

            // Verificar se email já existe
            if (stateManager.userExists(email)) {
                alert('Este e-mail já está cadastrado');
                return;
            }

            try {
                const userData = {
                    name,
                    email,
                    password,
                    type: userType
                };

                if (userType === 'professional') {
                    const salonName = document.getElementById('salon-name')?.value;
                    const salonLocation = document.getElementById('salon-location')?.value;
                    const salonPhone = document.getElementById('salon-phone')?.value;
                    const salonAddress = document.getElementById('salon-address')?.value;
                    const professionalDescription = document.getElementById('professional-description')?.value;

                    if (!salonName || !salonLocation || !salonPhone || !salonAddress || !professionalDescription) {
                        alert('Por favor, preencha todos os campos obrigatórios do salão');
                        return;
                    }

                    // Coletar serviços selecionados (não obrigatórios)
                    const selectedServices = Array.from(document.querySelectorAll('.service-checkbox:checked'))
                        .map(checkbox => checkbox.value);
                    
                    // Coletar serviços personalizados
                    const customServices = Array.from(document.querySelectorAll('#custom-services-list > div'))
                        .map(div => div.querySelector('input[type="hidden"]').value);
                    
                    const allServices = [...selectedServices, ...customServices];

                    // Processar fotos do salão
                    const photoInput = document.getElementById('salon-photos');
                    let salonPhotos = [];
                    
                    if (photoInput.files && photoInput.files.length > 0) {
                        const files = Array.from(photoInput.files).slice(0, 5); // Limitar a 5 fotos
                        
                        // Converter fotos para Data URLs (simulação - em produção enviaria para servidor)
                        for (const file of files) {
                            if (file.type.startsWith('image/')) {
                                const dataUrl = await new Promise((resolve) => {
                                    const reader = new FileReader();
                                    reader.onload = (e) => resolve(e.target.result);
                                    reader.readAsDataURL(file);
                                });
                                salonPhotos.push(dataUrl);
                            }
                        }
                    }

                    const salonData = {
                        name: salonName,
                        location: salonLocation,
                        phone: salonPhone,
                        address: salonAddress,
                        services: allServices,
                        openingHours: {
                            opening: document.getElementById('opening-time')?.value || '09:00',
                            closing: document.getElementById('closing-time')?.value || '18:00'
                        },
                        photos: salonPhotos,
                        submittedAt: new Date().toISOString()
                    };

                    const newUser = stateManager.addUser(userData);
                    const newSalon = stateManager.addSalon({
                        ...salonData,
                        userId: newUser.id
                    });
                    
                    stateManager.addProfessional({
                        userId: newUser.id,
                        salonId: newSalon.id,
                        name: userData.name,
                        specialty: allServices[0] || 'Profissional de Beleza',
                        description: professionalDescription,
                        services: allServices,
                        rating: 0,
                        reviews: 0,
                        image: salonPhotos.length > 0 ? salonPhotos[0] : 'https://images.unsplash.com/photo-1562322140-8baeececf3df?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8aGFpcmRyZXNzZXJ8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60',
                        price: '45,00 MT',
                        location: salonData.location,
                        status: 'approved'
                    });

                    stateManager.setCurrentUser(newUser);
                    
                    alert('✅ Cadastro realizado com sucesso! Seu perfil profissional já está ativo.');
                    renderView('professional-dashboard-page');
                    
                } else {
                    const newUser = stateManager.addUser(userData);
                    stateManager.setCurrentUser(newUser);
                    alert('✅ Cadastro realizado com sucesso!');
                    renderView('search-page');
                }

                const registerForm = document.getElementById('register-form');
                if (registerForm) registerForm.reset();
                
            } catch (error) {
                console.error('Erro no cadastro:', error);
                alert('Erro ao realizar cadastro. Tente novamente.');
            }
        }

        function showRegisterForm() {
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            
            if (loginForm && registerForm) {
                loginForm.classList.add('hidden');
                registerForm.classList.remove('hidden');
                
                // Atualizar ícones após mostrar o formulário
                if (window.lucide) {
                    setTimeout(() => {
                        lucide.createIcons();
                    }, 100);
                }
            }
        }

        function showLoginForm() {
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            
            if (loginForm && registerForm) {
                registerForm.classList.add('hidden');
                loginForm.classList.remove('hidden');
            }
        }

        function initAuthListeners() {
            console.log('🔧 Inicializando listeners de autenticação');
            
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            
            if (loginForm) {
                // Remover event listener antigo para evitar duplicação
                loginForm.onsubmit = null;
                loginForm.addEventListener('submit', handleLogin);
            }
            
            if (registerForm) {
                // Remover event listener antigo para evitar duplicação
                registerForm.onsubmit = null;
                registerForm.addEventListener('submit', handleRegister);
                
                // Toggle campos de profissional
                document.querySelectorAll('input[name="userType"]').forEach(radio => {
                    radio.addEventListener('change', function() {
                        const professionalFields = document.getElementById('professional-fields');
                        if (professionalFields) {
                            professionalFields.classList.toggle('hidden', this.value !== 'professional');
                            
                            // Tornar campos obrigatórios apenas para profissionais
                            const professionalInputs = professionalFields.querySelectorAll('input, textarea');
                            professionalInputs.forEach(input => {
                                if (this.value === 'professional') {
                                    input.setAttribute('required', 'required');
                                } else {
                                    input.removeAttribute('required');
                                }
                            });
                            
                            // Atualizar ícones após mostrar/ocultar campos
                            if (window.lucide) {
                                setTimeout(() => {
                                    lucide.createIcons();
                                }, 100);
                            }
                        }
                    });
                });
            }
            
            // Atualizar ícones
            if (window.lucide) {
                lucide.createIcons();
            }
        }

        // Função para adicionar serviço personalizado
        window.addCustomService = function() {
            const customServiceInput = document.getElementById('custom-service');
            const serviceName = customServiceInput.value.trim();
            
            if (serviceName) {
                const customServicesList = document.getElementById('custom-services-list');
                const serviceId = 'custom-' + Date.now();
                
                const serviceElement = document.createElement('div');
                serviceElement.className = 'flex items-center bg-gray-100 px-3 py-1 rounded-full';
                serviceElement.innerHTML = `
                    <span class="text-sm mr-2">${serviceName}</span>
                    <button type="button" onclick="removeCustomService('${serviceId}')" class="text-red-500 hover:text-red-700">
                        <i data-lucide="x" class="w-3 h-3"></i>
                    </button>
                    <input type="hidden" name="custom-services" value="${serviceName}">
                `;
                serviceElement.id = serviceId;
                
                customServicesList.appendChild(serviceElement);
                customServiceInput.value = '';
                
                // Atualizar ícones
                if (window.lucide) {
                    lucide.createIcons();
                }
            }
        };

        // Função para remover serviço personalizado
        window.removeCustomService = function(serviceId) {
            const serviceElement = document.getElementById(serviceId);
            if (serviceElement) {
                serviceElement.remove();
            }
        };

        // Função para lidar com upload de fotos
        window.handlePhotoUpload = function(input) {
            const preview = document.getElementById('photo-preview');
            preview.innerHTML = '';
            
            if (input.files && input.files.length > 0) {
                const files = Array.from(input.files).slice(0, 5); // Limitar a 5 fotos
                
                files.forEach(file => {
                    if (file.type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const imgContainer = document.createElement('div');
                            imgContainer.className = 'relative';
                            imgContainer.innerHTML = `
                                <img src="${e.target.result}" alt="Preview" class="w-full h-24 object-cover rounded-lg">
                                <button type="button" onclick="removePhoto(this)" class="absolute top-1 right-1 bg-red-500 text-white rounded-full p-1">
                                    <i data-lucide="x" class="w-3 h-3"></i>
                                </button>
                            `;
                            preview.appendChild(imgContainer);
                            
                            // Atualizar ícones
                            if (window.lucide) {
                                lucide.createIcons();
                            }
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
        };

        // Função para remover foto do preview
        window.removePhoto = function(button) {
            button.closest('.relative').remove();
        };

        // Inicializar listeners para upload de fotos
        document.addEventListener('DOMContentLoaded', function() {
            const photoInput = document.getElementById('salon-photos');
            if (photoInput) {
                photoInput.addEventListener('change', function() {
                    handlePhotoUpload(this);
                });
            }
        });

        // Views
        function getHomePageContent() {
            const professionals = stateManager.getApprovedProfessionals();
            
            return `
                <div class="min-h-screen bg-white">
                    <!-- Hero Section -->
                    <section class="bg-white py-20">
                        <div class="max-w-7xl mx-auto px-4 text-center">
                            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-black mb-6">
                                Encontre o salão perfeito<br>para o seu estilo
                            </h1>
                            
                            <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
                                Descubra os melhores profissionais de beleza perto de você.<br>
                                Agende seu próximo corte com facilidade e segurança.
                            </p>
                            
                            <!-- Search Bar -->
                            <div class="max-w-4xl mx-auto mb-8">
                                <div class="bg-white rounded-2xl shadow-lg border border-gray-200 p-6">
                                    <div class="flex flex-col md:flex-row gap-4">
                                        <div class="flex-1 relative">
                                            <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"></i>
                                            <input 
                                                type="text"
                                                placeholder="Pesquisar salão ou profissional..."
                                                class="w-full pl-10 h-12 border border-gray-300 rounded-lg focus:border-black focus:ring-0"
                                                id="home-search-input"
                                            />
                                        </div>
                                        <button onclick="performHomeSearch()" 
                                                class="bg-black text-white hover:bg-gray-800 h-12 px-8 rounded-lg wecut-button-hover font-medium">
                                            Buscar
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="flex flex-wrap justify-center gap-3 mb-12">
                                <button class="px-4 py-2 text-sm border border-gray-300 rounded-full hover:bg-gray-50 cursor-pointer transition-colors">
                                    💇 Corte Masculino
                                </button>
                                <button class="px-4 py-2 text-sm border border-gray-300 rounded-full hover:bg-gray-50 cursor-pointer transition-colors">
                                    💇‍♀️ Corte Feminino
                                </button>
                                <button class="px-4 py-2 text-sm border border-gray-300 rounded-full hover:bg-gray-50 cursor-pointer transition-colors">
                                    🎨 Coloração
                                </button>
                                <button class="px-4 py-2 text-sm border border-gray-300 rounded-full hover:bg-gray-50 cursor-pointer transition-colors">
                                    🧔 Barba
                                </button>
                                <button class="px-4 py-2 text-sm border border-gray-300 rounded-full hover:bg-gray-50 cursor-pointer transition-colors">
                                    👑 Tranças
                                </button>
                            </div>
                        </div>
                    </section>

                    <!-- Stats Section -->
                    <section class="py-16 bg-gray-50">
                        <div class="max-w-7xl mx-auto px-4">
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                                <div>
                                    <div class="text-3xl font-bold text-black mb-2">500+</div>
                                    <div class="text-gray-600">Profissionais</div>
                                </div>
                                <div>
                                    <div class="text-3xl font-bold text-black mb-2">10.000+</div>
                                    <div class="text-gray-600">Clientes Satisfeitos</div>
                                </div>
                                <div>
                                    <div class="text-3xl font-bold text-black mb-2">15+</div>
                                    <div class="text-gray-600">Cidades</div>
                                </div>
                                <div>
                                    <div class="text-3xl font-bold text-black mb-2">4.8★</div>
                                    <div class="text-gray-600">Avaliação Média</div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Featured Professionals -->
                    <section class="py-16 bg-white">
                        <div class="max-w-7xl mx-auto px-4">
                            <div class="text-center mb-12">
                                <h2 class="text-3xl font-bold text-black mb-4">Profissionais em Destaque</h2>
                                <p class="text-gray-600 text-lg">Os melhores cabeleireiros avaliados em Moçambique</p>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                ${professionals.slice(0, 3).map(professional => `
                                    <div class="border border-gray-300 rounded-xl hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden group">
                                        <div class="aspect-[4/3] relative overflow-hidden">
                                            <img 
                                                src="${professional.image}" 
                                                alt="${professional.name}"
                                                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                                            />
                                            <div class="absolute top-4 right-4">
                                                <span class="bg-white text-black border border-gray-300 px-3 py-1 rounded-full text-sm font-medium shadow-sm">
                                                    ${professional.price}
                                                </span>
                                            </div>
                                            <div class="absolute bottom-4 left-4">
                                                <span class="bg-green-600 text-white px-2 py-1 rounded text-xs font-medium">
                                                    Disponível
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <div class="p-6">
                                            <h3 class="text-xl font-semibold text-black mb-2">${professional.name}</h3>
                                            <p class="text-gray-600 mb-3">${professional.specialty}</p>
                                            
                                            <div class="flex items-center gap-4 mb-4 text-sm text-gray-600">
                                                <div class="flex items-center gap-1">
                                                    <i data-lucide="star" class="w-4 h-4 fill-yellow-400 stroke-yellow-400"></i>
                                                    <span class="font-medium text-black">${professional.rating}</span>
                                                    <span>(${professional.reviews} avaliações)</span>
                                                </div>
                                                <div class="flex items-center gap-1">
                                                    <i data-lucide="map-pin" class="w-4 h-4"></i>
                                                    <span>${professional.location}</span>
                                                </div>
                                            </div>

                                            <div class="flex gap-2">
                                                <button 
                                                    class="flex-1 border border-gray-300 hover:bg-gray-50 py-2 rounded-lg wecut-button-hover transition-colors"
                                                    onclick="viewProfessional(${professional.id})"
                                                >
                                                    Ver Perfil
                                                </button>
                                                <button 
                                                    class="flex-1 bg-black text-white hover:bg-gray-800 py-2 rounded-lg wecut-button-hover transition-colors"
                                                    onclick="startBooking(${professional.id})"
                                                >
                                                    Agendar
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>

                            <div class="text-center mt-12">
                                <button onclick="renderView('search-page')" 
                                        class="bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition-colors wecut-button-hover font-medium">
                                    Ver Todos os Profissionais
                                </button>
                            </div>
                        </div>
                    </section>

                    <!-- How it Works -->
                    <section class="py-16 bg-gray-50">
                        <div class="max-w-7xl mx-auto px-4">
                            <div class="text-center mb-12">
                                <h2 class="text-3xl font-bold text-black mb-4">Como Funciona</h2>
                                <p class="text-gray-600 text-lg">Simples, rápido e seguro</p>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                                <div class="text-center p-6">
                                    <div class="w-20 h-20 bg-black rounded-full flex items-center justify-center mx-auto mb-6">
                                        <i data-lucide="search" class="w-8 h-8 text-white"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold text-black mb-3">1. Busque</h3>
                                    <p class="text-gray-600">Encontre cabeleireiros no seu bairro ou cidade usando nossos filtros inteligentes e avaliações reais</p>
                                </div>

                                <div class="text-center p-6">
                                    <div class="w-20 h-20 bg-black rounded-full flex items-center justify-center mx-auto mb-6">
                                        <i data-lucide="calendar" class="w-8 h-8 text-white"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold text-black mb-3">2. Agende</h3>
                                    <p class="text-gray-600">Escolha o horário disponível que melhor se encaixa na sua agenda com apenas alguns cliques</p>
                                </div>

                                <div class="text-center p-6">
                                    <div class="w-20 h-20 bg-black rounded-full flex items-center justify-center mx-auto mb-6">
                                        <i data-lucide="scissors" class="w-8 h-8 text-white"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold text-black mb-3">3. Aproveite</h3>
                                    <p class="text-gray-600">Tenha o corte perfeito sem preocupações e avalie sua experiência para ajudar outros clientes</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Cities Section -->
                    <section class="py-16 bg-white">
                        <div class="max-w-7xl mx-auto px-4">
                            <div class="text-center mb-12">
                                <h2 class="text-3xl font-bold text-black mb-4">Disponível nas Principais Cidades</h2>
                                <p class="text-gray-600 text-lg">Encontre profissionais de qualidade em todo Moçambique</p>
                            </div>

                            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                                ${['Maputo', 'Matola', 'Beira', 'Nampula', 'Quelimane', 'Tete', 'Xai-Xai', 'Inhambane', 'Lichinga', 'Pemba', 'Chimoio', 'Nacala'].map(city => `
                                    <div class="text-center p-4 border border-gray-200 rounded-lg hover:border-black transition-colors cursor-pointer">
                                        <i data-lucide="map-pin" class="w-6 h-6 text-red-500 mx-auto mb-2"></i>
                                        <span class="text-black font-medium">${city}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </section>

                    <!-- CTA Section -->
                    <section class="py-20 bg-black">
                        <div class="max-w-4xl mx-auto px-4 text-center">
                            <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
                                Pronto para o seu próximo corte?
                            </h2>
                            <p class="text-gray-300 text-lg mb-8">
                                Junte-se a milhares de clientes satisfeitos e descubra os melhores profissionais de beleza perto de você.
                            </p>
                            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                                <button onclick="renderView('search-page')" 
                                        class="bg-white text-black px-8 py-3 rounded-lg hover:bg-gray-100 transition-colors wecut-button-hover font-medium">
                                    Encontrar Profissionais
                                </button>
                                ${!stateManager.state.currentUser ? `
                                    <button onclick="renderView('login-page')" 
                                            class="border border-white text-white px-8 py-3 rounded-lg hover:bg-white hover:text-black transition-colors wecut-button-hover font-medium">
                                        Criar Conta
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    </section>
                </div>
            `;
        }

        function getSearchPageContent() {
            const professionals = stateManager.getApprovedProfessionals();
            
            return `
                <div class="min-h-screen bg-gray-50">
                    <div class="max-w-7xl mx-auto px-4 py-8">
                        <!-- Search Header -->
                        <div class="bg-white rounded-lg p-6 mb-8 border border-gray-300">
                            <div class="flex flex-col md:flex-row gap-4">
                                <div class="flex-1 relative">
                                    <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"></i>
                                    <input 
                                        type="text"
                                        placeholder="Buscar por localização, serviço ou profissional..."
                                        class="w-full pl-10 h-12 border border-gray-300 rounded-lg focus:border-black focus:ring-0"
                                        id="search-input"
                                    />
                                </div>
                                <button class="border border-gray-300 h-12 px-6 rounded-lg hover:bg-gray-50 wecut-button-hover" onclick="showFilters()">
                                    <i data-lucide="filter" class="w-4 h-4 inline mr-2"></i>
                                    Filtros
                                </button>
                                <button class="bg-black text-white hover:bg-gray-800 h-12 px-8 rounded-lg wecut-button-hover" onclick="performSearch()">
                                    Buscar
                                </button>
                            </div>
                        </div>

                        <!-- Results Header -->
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-2xl text-black" id="results-count">${professionals.length} profissionais encontrados</h2>
                            <select class="w-48 border border-gray-300 rounded-lg p-2 focus:border-black focus:ring-0" id="sort-select">
                                <option>Ordenar por relevância</option>
                                <option>Melhor avaliado</option>
                                <option>Mais próximo</option>
                                <option>Menor preço</option>
                                <option>Maior preço</option>
                            </select>
                        </div>

                        <!-- Results Grid -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6" id="search-results">
                            ${professionals.map(professional => `
                                <div class="border border-gray-300 cursor-pointer transition-all hover:shadow-lg rounded-lg overflow-hidden">
                                    <div class="flex">
                                        <div class="w-32 h-32 relative flex-shrink-0">
                                            <img 
                                                src="${professional.image}" 
                                                alt="${professional.name}"
                                                class="w-full h-full object-cover"
                                            />
                                            <div class="absolute top-2 left-2">
                                                <span class="bg-green-600 text-white text-xs px-2 py-1 rounded">Disponível</span>
                                            </div>
                                        </div>
                                        
                                        <div class="flex-1 p-4">
                                            <div class="flex items-start justify-between mb-2">
                                                <div>
                                                    <h3 class="text-lg text-black">${professional.name}</h3>
                                                    <p class="text-gray-600 text-sm">${professional.specialty}</p>
                                                </div>
                                                <div class="text-right">
                                                    <p class="text-lg text-black">${professional.price}</p>
                                                    <p class="text-xs text-gray-500">por serviço</p>
                                                </div>
                                            </div>
                                            
                                            <div class="flex items-center gap-4 mb-3 text-sm text-gray-600">
                                                <div class="flex items-center gap-1">
                                                    <i data-lucide="star" class="w-4 h-4 fill-yellow-400 stroke-yellow-400"></i>
                                                    <span>${professional.rating}</span>
                                                    <span>(${professional.reviews})</span>
                                                </div>
                                                <div class="flex items-center gap-1">
                                                    <i data-lucide="map-pin" class="w-4 h-4"></i>
                                                    <span>${professional.location}</span>
                                                </div>
                                                <div class="flex items-center gap-1">
                                                    <i data-lucide="clock" class="w-4 h-4"></i>
                                                    <span>Hoje, 14:30</span>
                                                </div>
                                            </div>

                                            <div class="flex gap-2">
                                                <button 
                                                    class="flex-1 border border-gray-300 hover:bg-gray-50 py-2 rounded wecut-button-hover"
                                                    onclick="viewProfessional(${professional.id})"
                                                >
                                                    Ver Perfil
                                                </button>
                                                <button 
                                                    class="flex-1 bg-black text-white hover:bg-gray-800 py-2 rounded wecut-button-hover"
                                                    onclick="startBooking(${professional.id})"
                                                >
                                                    Agendar
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function getLoginPageContent() {
            return `
                <div class="min-h-screen bg-white flex items-center justify-center px-4 py-8">
                    <div class="w-full max-w-md">
                        <!-- Back Button -->
                        <button class="mb-8 text-black hover:bg-gray-50 p-2 rounded wecut-button-hover"
                                onclick="renderView('home-page')">
                            <i data-lucide="arrow-left" class="w-4 h-4 inline mr-2"></i>
                            Voltar
                        </button>

                        <!-- Logo -->
                        <div class="text-center mb-8">
                            <h1 class="text-3xl font-medium text-black mb-2">WeCut</h1>
                            <p class="text-gray-600">Entre na sua conta</p>
                        </div>

                        <!-- Login Form -->
                        <div class="border border-gray-300 rounded-lg wecut-shadow p-6">
                            <h2 class="text-2xl text-center text-black mb-6">Fazer Login</h2>
                            
                            <form id="login-form" class="space-y-6">
                                <div>
                                    <label for="email" class="block text-black mb-2">E-mail</label>
                                    <input type="email" id="email" required
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0"
                                           placeholder="seu@email.com">
                                </div>
                                
                                <div>
                                    <label for="password" class="block text-black mb-2">Senha</label>
                                    <input type="password" id="password" required
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0"
                                           placeholder="••••••••">
                                </div>

                                <button type="button" onclick="handleLogin()" 
                                        class="w-full bg-black text-white hover:bg-gray-800 py-3 rounded-lg wecut-button-hover">
                                    Entrar
                                </button>

                                <div class="text-center">
                                    <span class="text-gray-600">Não tem uma conta? </span>
                                    <button type="button" class="text-black hover:text-gray-600" 
                                            onclick="showRegisterForm()">
                                        Criar conta
                                    </button>
                                </div>
                            </form>

                            <!-- Registration Form -->
                            <div id="register-form" class="hidden space-y-6 mt-6">
                                <div>
                                    <label class="block text-black mb-3">Tipo de conta</label>
                                    <div class="grid grid-cols-2 gap-4">
                                        <label class="flex items-center p-4 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                            <input type="radio" name="userType" value="client" class="mr-3" checked>
                                            <div>
                                                <p class="font-medium text-black">Cliente</p>
                                                <p class="text-sm text-gray-600">Agendar serviços</p>
                                            </div>
                                        </label>
                                        <label class="flex items-center p-4 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                            <input type="radio" name="userType" value="professional" class="mr-3">
                                            <div>
                                                <p class="font-medium text-black">Profissional</p>
                                                <p class="text-sm text-gray-600">Oferecer serviços</p>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <input type="text" id="register-name" placeholder="Nome completo" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0" required>
                                <input type="email" id="register-email" placeholder="E-mail" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0" required>
                                <input type="password" id="register-password" placeholder="Senha" 
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0" required>

                                <!-- Professional fields -->
                                <div id="professional-fields" class="hidden space-y-4">
                                    <input type="text" id="salon-name" placeholder="Nome do salão/estabelecimento" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                    <input type="text" id="salon-location" placeholder="Localização (cidade, bairro)" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                    <input type="tel" id="salon-phone" placeholder="Telefone do salão" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                    <textarea id="salon-address" placeholder="Endereço completo do salão" 
                                              class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0"></textarea>
                                    
                                    <!-- Descrição do profissional -->
                                    <div>
                                        <label class="block text-sm font-medium text-black mb-2">Descrição do Profissional</label>
                                        <textarea id="professional-description" rows="3" 
                                                  class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0"
                                                  placeholder="Descreva seus serviços, experiência, etc." required></textarea>
                                    </div>
                                    
                                    <!-- Serviços oferecidos - NÃO OBRIGATÓRIOS -->
                                    <div>
                                        <label class="block text-sm font-medium text-black mb-2">Serviços Oferecidos (opcional)</label>
                                        <div class="grid grid-cols-2 gap-2 mb-3">
                                            <label class="flex items-center">
                                                <input type="checkbox" value="Corte Masculino" class="mr-2 service-checkbox">
                                                <span class="text-sm">Corte Masculino</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" value="Corte Feminino" class="mr-2 service-checkbox">
                                                <span class="text-sm">Corte Feminino</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" value="Barba" class="mr-2 service-checkbox">
                                                <span class="text-sm">Barba</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" value="Coloração" class="mr-2 service-checkbox">
                                                <span class="text-sm">Coloração</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" value="Manicure" class="mr-2 service-checkbox">
                                                <span class="text-sm">Manicure</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="checkbox" value="Pedicure" class="mr-2 service-checkbox">
                                                <span class="text-sm">Pedicure</span>
                                            </label>
                                        </div>
                                        
                                        <!-- Campo para serviço personalizado -->
                                        <div class="flex gap-2">
                                            <input type="text" id="custom-service" placeholder="Adicionar serviço personalizado" 
                                                   class="flex-1 p-2 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                            <button type="button" onclick="addCustomService()" 
                                                    class="bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800 wecut-button-hover">
                                                Adicionar
                                            </button>
                                        </div>
                                        <div id="custom-services-list" class="flex flex-wrap gap-2 mt-2"></div>
                                    </div>
                                    
                                    <!-- Horário de funcionamento -->
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-black mb-2">Horário de Abertura</label>
                                            <input type="time" id="opening-time" 
                                                   class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0"
                                                   value="09:00">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-black mb-2">Horário de Fechamento</label>
                                            <input type="time" id="closing-time" 
                                                   class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0"
                                                   value="18:00">
                                        </div>
                                    </div>
                                    
                                    <!-- Upload de fotos via input file -->
                                    <div>
                                        <label class="block text-sm font-medium text-black mb-2">Fotos do Salão</label>
                                        <input type="file" id="salon-photos" multiple accept="image/*" 
                                               class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                        <p class="text-xs text-gray-500 mt-1">Selecione as fotos do seu salão (máx. 5 fotos)</p>
                                        <div id="photo-preview" class="grid grid-cols-2 gap-2 mt-3"></div>
                                    </div>
                                </div>

                                <button type="button" onclick="handleRegister()" 
                                        class="w-full bg-green-600 text-white hover:bg-green-700 py-3 rounded-lg wecut-button-hover">
                                    Cadastrar
                                </button>

                                <div class="text-center">
                                    <button type="button" onclick="showLoginForm()" 
                                            class="text-black hover:text-gray-600">
                                        Já tem conta? Fazer login
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- AVISO DE SEGURANÇA -->
                        <div class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800">
                            <strong>⚠️ AVISO:</strong> Esta é uma demonstração frontend. 
                            Em produção, a autenticação deve ser implementada no backend com medidas de segurança adequadas.
                        </div>
                    </div>
                </div>
            `;
        }

        function getProfessionalProfileContent() {
            const professional = stateManager.state.professionals.find(p => p.id === stateManager.state.bookingProfessionalId) || stateManager.state.professionals[0];
            const salon = stateManager.state.salons.find(s => s.id === professional.salonId);
            
            return `
                <div class="min-h-screen bg-white">
                    <div class="max-w-6xl mx-auto">
                        <!-- Header -->
                        <div class="flex items-center justify-between p-4 border-b border-gray-300">
                            <button 
                                class="text-black hover:bg-gray-50 p-2 rounded wecut-button-hover"
                                onclick="renderView('search-page')"
                            >
                                <i data-lucide="arrow-left" class="w-4 h-4 inline mr-2"></i>
                                Voltar
                            </button>
                            <div class="flex gap-2">
                                <button class="text-black hover:bg-gray-50 p-2 rounded wecut-button-hover">
                                    <i data-lucide="heart" class="w-4 h-4"></i>
                                </button>
                                <button class="text-black hover:bg-gray-50 p-2 rounded wecut-button-hover">
                                    <i data-lucide="share-2" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 p-6">
                            <!-- Left Column - Profile Info -->
                            <div class="lg:col-span-2 space-y-6">
                                <!-- Professional Header -->
                                <div class="flex items-start gap-6">
                                    <div class="w-24 h-24 rounded-full overflow-hidden flex-shrink-0">
                                        <img 
                                            src="${professional.image}" 
                                            alt="${professional.name}"
                                            class="w-full h-full object-cover"
                                        />
                                    </div>
                                    <div class="flex-1">
                                        <h1 class="text-3xl font-medium text-black mb-1">${professional.name}</h1>
                                        <p class="text-lg text-gray-600 mb-2">${salon?.name || 'Salão'}</p>
                                        <p class="text-gray-600 mb-3">${professional.specialty}</p>
                                        
                                        <div class="flex items-center gap-6 mb-4">
                                            <div class="flex items-center gap-2">
                                                <div class="flex gap-1">
                                                    ${Array(5).fill().map((_, i) => `
                                                        <i data-lucide="star" class="w-4 h-4 ${i < Math.floor(professional.rating) ? 'fill-yellow-400 stroke-yellow-400' : 'stroke-gray-300'}"></i>
                                                    `).join('')}
                                                </div>
                                                <span class="text-lg font-medium text-black">${professional.rating}</span>
                                                <span class="text-gray-600">(${professional.reviews} avaliações)</span>
                                            </div>
                                            <div class="flex items-center gap-1 text-gray-600">
                                                <i data-lucide="map-pin" class="w-4 h-4"></i>
                                                <span>${professional.location}</span>
                                            </div>
                                        </div>

                                        <p class="text-gray-700 mb-4">${professional.description}</p>

                                        <div class="flex items-center gap-4 text-sm text-gray-600">
                                            <div class="flex items-center gap-1">
                                                <i data-lucide="clock" class="w-4 h-4"></i>
                                                <span>${salon?.openingHours?.opening || '09:00'} - ${salon?.openingHours?.closing || '18:00'}</span>
                                            </div>
                                            <div class="flex items-center gap-1">
                                                <i data-lucide="phone" class="w-4 h-4"></i>
                                                <span>${salon?.phone || 'N/A'}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tabs Content -->
                                <div class="border border-gray-300 rounded-lg">
                                    <div class="border-b border-gray-300">
                                        <div class="flex">
                                            <button class="flex-1 py-4 text-center border-b-2 border-black text-black font-medium">Portfólio</button>
                                            <button class="flex-1 py-4 text-center text-gray-600 hover:text-black">Serviços</button>
                                            <button class="flex-1 py-4 text-center text-gray-600 hover:text-black">Avaliações</button>
                                        </div>
                                    </div>
                                    
                                    <div class="p-6">
                                        <!-- Portfolio Content -->
                                        <div class="space-y-6">
                                            ${salon?.photos && salon.photos.length > 0 ? `
                                                <div class="aspect-[4/3] rounded-lg overflow-hidden">
                                                    <img 
                                                        src="${salon.photos[0]}" 
                                                        alt="Portfolio image"
                                                        class="w-full h-full object-cover"
                                                    />
                                                </div>
                                                
                                                <div class="grid grid-cols-4 gap-4">
                                                    ${salon.photos.slice(0, 4).map(photo => `
                                                        <div class="aspect-square rounded-lg overflow-hidden border-2 border-gray-300">
                                                            <img 
                                                                src="${photo}" 
                                                                alt="Thumbnail"
                                                                class="w-full h-full object-cover"
                                                            />
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            ` : `
                                                <div class="text-center py-8">
                                                    <i data-lucide="camera" class="w-12 h-12 text-gray-400 mx-auto mb-4"></i>
                                                    <p class="text-gray-600">Nenhuma foto disponível</p>
                                                </div>
                                            `}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Right Column - Booking -->
                            <div class="space-y-6">
                                <!-- Quick Book Card -->
                                <div class="border border-gray-300 rounded-lg wecut-shadow p-6 sticky top-6">
                                    <h3 class="text-xl font-medium text-black mb-4">Agendar Horário</h3>
                                    
                                    <div class="space-y-4 mb-6">
                                        <div>
                                            <p class="text-sm font-medium text-black mb-2">Próximos horários</p>
                                            <div class="space-y-2">
                                                ${['Hoje, 14:30', 'Hoje, 15:00', 'Amanhã, 09:00'].map(slot => `
                                                    <button class="w-full p-3 text-left border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                                        <div class="flex justify-between items-center">
                                                            <span class="text-black">${slot.split(', ')[0]}</span>
                                                            <span class="text-gray-600">${slot.split(', ')[1]}</span>
                                                        </div>
                                                    </button>
                                                `).join('')}
                                            </div>
                                        </div>
                                    </div>

                                    <div class="space-y-3">
                                        <button 
                                            class="w-full bg-black text-white hover:bg-gray-800 py-2 rounded wecut-button-hover"
                                            onclick="startBooking(${professional.id})"
                                        >
                                            <i data-lucide="calendar" class="w-4 h-4 inline mr-2"></i>
                                            Agendar agora
                                        </button>
                                        
                                        <button class="w-full border border-gray-300 hover:bg-gray-50 py-2 rounded wecut-button-hover">
                                            <i data-lucide="phone" class="w-4 h-4 inline mr-2"></i>
                                            Ligar
                                        </button>
                                    </div>

                                    <div class="mt-6 pt-6 border-t border-gray-300">
                                        <div class="text-center text-sm text-gray-600">
                                            <p class="mb-1">📍 ${salon?.address || 'Endereço não disponível'}</p>
                                            <button class="text-black hover:text-gray-600">Ver no mapa</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Business Hours -->
                                <div class="border border-gray-300 rounded-lg p-6">
                                    <h4 class="font-medium text-black mb-4">Horário de Funcionamento</h4>
                                    <div class="space-y-2 text-sm">
                                        ${[
                                            ['Segunda-feira', `${salon?.openingHours?.opening || '09:00'} - ${salon?.openingHours?.closing || '18:00'}`],
                                            ['Terça-feira', `${salon?.openingHours?.opening || '09:00'} - ${salon?.openingHours?.closing || '18:00'}`],
                                            ['Quarta-feira', `${salon?.openingHours?.opening || '09:00'} - ${salon?.openingHours?.closing || '18:00'}`],
                                            ['Quinta-feira', `${salon?.openingHours?.opening || '09:00'} - ${salon?.openingHours?.closing || '18:00'}`],
                                            ['Sexta-feira', `${salon?.openingHours?.opening || '09:00'} - ${salon?.openingHours?.closing || '18:00'}`],
                                            ['Sábado', `${salon?.openingHours?.opening || '09:00'} - ${salon?.openingHours?.closing || '18:00'}`],
                                            ['Domingo', 'Fechado']
                                        ].map(([day, hours]) => `
                                            <div class="flex justify-between">
                                                <span class="text-gray-600">${day}</span>
                                                <span class="${day === 'Domingo' ? 'text-red-600' : 'text-black'}">${hours}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function getBookingPageContent() {
            const professional = stateManager.state.professionals.find(p => p.id === stateManager.state.bookingProfessionalId) || stateManager.state.professionals[0];
            const salon = stateManager.state.salons.find(s => s.id === professional.salonId);
            
            return `
                <div class="min-h-screen bg-white">
                    <div class="max-w-6xl mx-auto">
                        <!-- Header -->
                        <div class="flex items-center justify-between p-4 border-b border-gray-300">
                            <button 
                                class="text-black hover:bg-gray-50 p-2 rounded wecut-button-hover"
                                onclick="renderView('professional-profile-page')"
                            >
                                <i data-lucide="arrow-left" class="w-4 h-4 inline mr-2"></i>
                                Voltar
                            </button>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 p-6">
                            <!-- Left Column - Profile Info -->
                            <div class="lg:col-span-2 space-y-6">
                                <!-- Professional Header -->
                                <div class="flex items-start gap-6">
                                    <div class="w-24 h-24 rounded-full overflow-hidden flex-shrink-0">
                                        <img 
                                            src="${professional.image}" 
                                            alt="${professional.name}"
                                            class="w-full h-full object-cover"
                                        />
                                    </div>
                                    <div class="flex-1">
                                        <h1 class="text-3xl font-medium text-black mb-1">${professional.name}</h1>
                                        <p class="text-lg text-gray-600 mb-2">${salon?.name || 'Salão'}</p>
                                        <p class="text-gray-600 mb-3">${professional.specialty}</p>
                                        
                                        <div class="flex items-center gap-6 mb-4">
                                            <div class="flex items-center gap-2">
                                                <div class="flex gap-1">
                                                    ${Array(5).fill().map((_, i) => `
                                                        <i data-lucide="star" class="w-4 h-4 ${i < Math.floor(professional.rating) ? 'fill-yellow-400 stroke-yellow-400' : 'stroke-gray-300'}"></i>
                                                    `).join('')}
                                                </div>
                                                <span class="text-lg font-medium text-black">${professional.rating}</span>
                                                <span class="text-gray-600">(${professional.reviews} avaliações)</span>
                                            </div>
                                            <div class="flex items-center gap-1 text-gray-600">
                                                <i data-lucide="map-pin" class="w-4 h-4"></i>
                                                <span>${professional.location}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Booking Form -->
                                <div class="border border-gray-300 rounded-lg p-6">
                                    <h3 class="text-xl font-medium text-black mb-4">Agendar Serviço</h3>
                                    
                                    <form id="booking-form" onsubmit="confirmBooking(event)">
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                            <div>
                                                <label class="block text-sm font-medium text-black mb-2">Data</label>
                                                <input type="date" id="booking-date" required
                                                       class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-black mb-2">Horário</label>
                                                <select id="booking-time" required
                                                        class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                                    <option value="">Selecione um horário</option>
                                                    <option value="09:00">09:00</option>
                                                    <option value="10:00">10:00</option>
                                                    <option value="11:00">11:00</option>
                                                    <option value="14:00">14:00</option>
                                                    <option value="15:00">15:00</option>
                                                    <option value="16:00">16:00</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label class="block text-sm font-medium text-black mb-2">Serviço</label>
                                            <select id="booking-service" required
                                                    class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                                <option value="">Selecione um serviço</option>
                                                ${professional.services.map(service => `
                                                    <option value="${service}">${service} - ${professional.price}</option>
                                                `).join('')}
                                            </select>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label class="block text-sm font-medium text-black mb-2">Observações (opcional)</label>
                                            <textarea id="booking-notes" rows="3"
                                                      class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0"
                                                      placeholder="Alguma observação especial..."></textarea>
                                        </div>
                                        
                                        <button type="submit" 
                                                class="w-full bg-black text-white hover:bg-gray-800 py-3 rounded-lg wecut-button-hover">
                                            Confirmar Agendamento
                                        </button>
                                    </form>
                                </div>
                            </div>

                            <!-- Right Column - Summary -->
                            <div class="space-y-6">
                                <!-- Booking Summary -->
                                <div class="border border-gray-300 rounded-lg wecut-shadow p-6 sticky top-6">
                                    <h3 class="text-xl font-medium text-black mb-4">Resumo do Agendamento</h3>
                                    
                                    <div class="space-y-3 mb-4">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Profissional:</span>
                                            <span class="text-black">${professional.name}</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Serviço:</span>
                                            <span class="text-black" id="summary-service">-</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Data:</span>
                                            <span class="text-black" id="summary-date">-</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Horário:</span>
                                            <span class="text-black" id="summary-time">-</span>
                                        </div>
                                    </div>
                                    
                                    <div class="border-t border-gray-300 pt-4">
                                        <div class="flex justify-between text-lg font-medium">
                                            <span class="text-black">Total:</span>
                                            <span class="text-black" id="summary-price">-</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function confirmBooking(event) {
            event.preventDefault();
            
            const service = document.getElementById('booking-service').value;
            const date = document.getElementById('booking-date').value;
            const time = document.getElementById('booking-time').value;
            const notes = document.getElementById('booking-notes').value;
            
            if (!service || !date || !time) {
                alert('Por favor, preencha todos os campos obrigatórios.');
                return;
            }
            
            const professional = stateManager.state.professionals.find(p => p.id === stateManager.state.bookingProfessionalId);
            const salon = stateManager.state.salons.find(s => s.id === professional.salonId);
            
            const newAppointment = {
                professionalId: stateManager.state.bookingProfessionalId || 1,
                clientName: stateManager.state.currentUser ? stateManager.state.currentUser.name : 'Cliente',
                service: service,
                date: new Date(date).toISOString(),
                time: time,
                price: professional.price,
                status: 'pending',
                notes: notes,
                location: professional.location,
                phone: salon?.phone || '+258 84 123 4567',
                address: salon?.address || 'Endereço não disponível',
                image: professional.image
            };
            
            stateManager.addAppointment(newAppointment);
            
            alert(`📅 Agendamento solicitado! Código: ${newAppointment.code}\n\nO profissional será notificado e você receberá uma confirmação em breve.`);
            renderView('appointments-page');
        }

        function getAppointmentsPageContent() {
            const appointments = stateManager.state.appointments;
            
            return `
                <div class="min-h-screen bg-gray-50">
                    <div class="max-w-6xl mx-auto px-4 py-8">
                        <!-- Header -->
                        <div class="mb-8">
                            <h1 class="text-3xl text-black mb-2">Meus Agendamentos</h1>
                            <p class="text-gray-600">Gerencie seus agendamentos e histórico de serviços</p>
                        </div>

                        <!-- Quick Stats -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="border border-gray-300 rounded-lg p-6 text-center bg-white">
                                <div class="flex items-center justify-center mb-2">
                                    <i data-lucide="calendar" class="w-6 h-6 text-blue-600"></i>
                                </div>
                                <p class="text-2xl text-black">${appointments.length}</p>
                                <p class="text-sm text-gray-600">Próximos agendamentos</p>
                            </div>
                            
                            <div class="border border-gray-300 rounded-lg p-6 text-center bg-white">
                                <div class="flex items-center justify-center mb-2">
                                    <i data-lucide="check-circle" class="w-6 h-6 text-green-600"></i>
                                </div>
                                <p class="text-2xl text-black">${appointments.filter(apt => apt.status === 'completed').length}</p>
                                <p class="text-sm text-gray-600">Serviços realizados</p>
                            </div>
                            
                            <div class="border border-gray-300 rounded-lg p-6 text-center bg-white">
                                <div class="flex items-center justify-center mb-2">
                                    <i data-lucide="star" class="w-6 h-6 text-yellow-600"></i>
                                </div>
                                <p class="text-2xl text-black">4.5</p>
                                <p class="text-sm text-gray-600">Avaliação média dada</p>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="bg-white rounded-lg border border-gray-300">
                            <div class="border-b border-gray-300">
                                <div class="flex">
                                    <button class="flex-1 py-4 text-center border-b-2 border-black text-black font-medium" onclick="switchAppointmentTab('upcoming')">Próximos</button>
                                    <button class="flex-1 py-4 text-center text-gray-600 hover:text-black" onclick="switchAppointmentTab('history')">Histórico</button>
                                    <button class="flex-1 py-4 text-center text-gray-600 hover:text-black" onclick="switchAppointmentTab('cancelled')">Cancelados</button>
                                </div>
                            </div>
                            
                            <div class="p-6">
                                <div class="space-y-6" id="appointments-list">
                                    ${appointments.map(appointment => `
                                        <div class="border border-gray-300 rounded-lg hover:shadow-lg transition-shadow p-6">
                                            <div class="flex items-start gap-4">
                                                <div class="w-16 h-16 rounded-full overflow-hidden flex-shrink-0">
                                                    <img 
                                                        src="${appointment.image}" 
                                                        alt="${appointment.professional}"
                                                        class="w-full h-full object-cover"
                                                    />
                                                </div>
                                                
                                                <div class="flex-1">
                                                    <div class="flex items-start justify-between mb-3">
                                                        <div>
                                                            <h3 class="text-lg text-black">${appointment.clientName}</h3>
                                                            <p class="text-gray-600">${appointment.service}</p>
                                                            <p class="text-sm text-gray-500">Código: ${appointment.code}</p>
                                                        </div>
                                                        <div class="text-right">
                                                            <p class="text-lg text-black">${appointment.price}</p>
                                                            <span class="bg-green-100 text-green-800 border border-green-200 px-2 py-1 rounded text-sm">Confirmado</span>
                                                        </div>
                                                    </div>

                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 text-sm">
                                                        <div class="flex items-center gap-2 text-gray-600">
                                                            <i data-lucide="calendar" class="w-4 h-4"></i>
                                                            <span>${new Date(appointment.date).toLocaleDateString('pt-BR', { weekday: 'long', day: 'numeric', month: 'long' })}</span>
                                                        </div>
                                                        <div class="flex items-center gap-2 text-gray-600">
                                                            <i data-lucide="clock" class="w-4 h-4"></i>
                                                            <span>${appointment.time}</span>
                                                        </div>
                                                        <div class="flex items-center gap-2 text-gray-600">
                                                            <i data-lucide="map-pin" class="w-4 h-4"></i>
                                                            <span>${appointment.location}</span>
                                                        </div>
                                                        <div class="flex items-center gap-2 text-gray-600">
                                                            <i data-lucide="phone" class="w-4 h-4"></i>
                                                            <span>${appointment.phone}</span>
                                                        </div>
                                                    </div>

                                                    <p class="text-sm text-gray-600 mb-4">${appointment.address}</p>

                                                    <div class="flex flex-wrap gap-2">
                                                        <button class="border border-gray-300 hover:bg-gray-50 px-3 py-1 rounded text-sm wecut-button-hover">
                                                            <i data-lucide="message-circle" class="w-4 h-4 inline mr-2"></i>
                                                            Mensagem
                                                        </button>
                                                        <button class="border border-gray-300 hover:bg-gray-50 px-3 py-1 rounded text-sm wecut-button-hover">
                                                            <i data-lucide="navigation" class="w-4 h-4 inline mr-2"></i>
                                                            Direções
                                                        </button>
                                                        <button class="border border-red-200 hover:bg-red-50 text-red-600 px-3 py-1 rounded text-sm wecut-button-hover">
                                                            <i data-lucide="x-circle" class="w-4 h-4 inline mr-2"></i>
                                                            Cancelar
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function getProfessionalDashboardContent() {
            const professional = stateManager.state.professionals.find(p => p.userId === stateManager.state.currentUser?.id);
            const salon = stateManager.state.salons.find(s => s.userId === stateManager.state.currentUser?.id);
            const appointments = stateManager.getProfessionalAppointments(professional?.id);
            const pendingAppointments = appointments.filter(apt => apt.status === 'pending');
            
            return `
                <div class="min-h-screen bg-gray-50">
                    <div class="max-w-7xl mx-auto px-4 py-8">
                        <!-- Header -->
                        <div class="mb-8">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h1 class="text-3xl font-bold text-gray-900">Dashboard Profissional</h1>
                                    <p class="text-gray-600">Gerencie seus agendamentos e serviços</p>
                                </div>
                                
                                <!-- Botões de perfil -->
                                <div class="flex gap-3">
                                    <button onclick="viewProfessionalProfile()" 
                                            class="bg-blue-600 text-white hover:bg-blue-700 px-4 py-2 rounded-lg wecut-button-hover flex items-center">
                                        <i data-lucide="eye" class="w-4 h-4 mr-2"></i>
                                        Ver Perfil
                                    </button>
                                    <button onclick="editProfessionalProfile()" 
                                            class="bg-green-600 text-white hover:bg-green-700 px-4 py-2 rounded-lg wecut-button-hover flex items-center">
                                        <i data-lucide="edit" class="w-4 h-4 mr-2"></i>
                                        Editar Perfil
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Banner de Status -->
                            <div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded">
                                <p>✅ Seu perfil está ativo e visível para clientes</p>
                            </div>
                            
                            ${pendingAppointments.length > 0 ? `
                                <div class="mt-4 bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded">
                                    <p>📬 Você tem <strong>${pendingAppointments.length}</strong> novo(s) agendamento(s) para confirmar</p>
                                </div>
                            ` : ''}
                        </div>

                        <!-- Tabs -->
                        <div class="bg-white rounded-lg border border-gray-300 shadow-sm">
                            <div class="border-b border-gray-300">
                                <div class="flex overflow-x-auto">
                                    <button class="px-6 py-4 border-b-2 whitespace-nowrap ${stateManager.state.professionalTab === 'pending' ? 'border-black text-black font-medium' : 'text-gray-600 hover:text-black'}" 
                                            onclick="switchProfessionalTab('pending')">
                                        <i data-lucide="clock" class="w-4 h-4 inline mr-2"></i>
                                        Pendentes
                                        ${pendingAppointments.length > 0 ? `
                                            <span class="ml-2 bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">${pendingAppointments.length}</span>
                                        ` : ''}
                                    </button>
                                    <button class="px-6 py-4 border-b-2 whitespace-nowrap ${stateManager.state.professionalTab === 'accepted' ? 'border-black text-black font-medium' : 'text-gray-600 hover:text-black'}" 
                                            onclick="switchProfessionalTab('accepted')">
                                        <i data-lucide="check-circle" class="w-4 h-4 inline mr-2"></i>
                                        Aceites
                                    </button>
                                </div>
                            </div>
                            
                            <div class="p-6">
                                ${getProfessionalTabContent(appointments)}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function getProfessionalTabContent(appointments) {
            switch(stateManager.state.professionalTab) {
                case 'pending':
                    const pendingAppointments = appointments.filter(apt => apt.status === 'pending');
                    return renderAppointmentsList(pendingAppointments, 'pending');
                    
                case 'accepted':
                    const acceptedAppointments = appointments.filter(apt => apt.status === 'accepted');
                    return renderAppointmentsList(acceptedAppointments, 'accepted');
                    
                default:
                    return '<p class="text-gray-600">Conteúdo não disponível</p>';
            }
        }

        function renderAppointmentsList(appointments, type) {
            if (appointments.length === 0) {
                return `
                    <div class="text-center py-12">
                        <i data-lucide="calendar" class="w-16 h-16 text-gray-400 mx-auto mb-4"></i>
                        <h3 class="text-lg font-medium text-gray-900 mb-2">Nenhum agendamento</h3>
                        <p class="text-gray-600">${type === 'pending' ? 'Não há agendamentos pendentes.' : 'Não há agendamentos aceites.'}</p>
                    </div>
                `;
            }
            
            return `
                <div class="space-y-4">
                    ${appointments.map(apt => `
                        <div class="border border-gray-300 rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between mb-3">
                                <div>
                                    <h3 class="font-medium text-gray-900">${apt.clientName}</h3>
                                    <p class="text-gray-600">${apt.service} • ${apt.time}</p>
                                    <p class="text-sm text-gray-500">Código: ${apt.code}</p>
                                </div>
                                <span class="px-3 py-1 rounded-full text-sm ${type === 'pending' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'}">
                                    ${type === 'pending' ? 'Pendente' : 'Aceite'}
                                </span>
                            </div>
                            
                            <div class="text-sm text-gray-600 mb-3">
                                <p><strong>Data:</strong> ${new Date(apt.date).toLocaleDateString('pt-BR')}</p>
                                <p><strong>Hora:</strong> ${apt.time}</p>
                                <p><strong>Valor:</strong> ${apt.price}</p>
                                <p><strong>Contacto:</strong> ${apt.phone}</p>
                                <p><strong>Local:</strong> ${apt.address}</p>
                                ${apt.notes ? `<p><strong>Observações:</strong> ${apt.notes}</p>` : ''}
                            </div>
                            
                            <div class="flex gap-2">
                                ${type === 'pending' ? `
                                    <button onclick="acceptAppointment(${apt.id})" class="bg-green-600 text-white hover:bg-green-700 px-4 py-2 rounded text-sm wecut-button-hover">
                                        <i data-lucide="check" class="w-4 h-4 inline mr-1"></i>
                                        Aceitar
                                    </button>
                                    <button onclick="rejectAppointment(${apt.id})" class="bg-red-600 text-white hover:bg-red-700 px-4 py-2 rounded text-sm wecut-button-hover">
                                        <i data-lucide="x" class="w-4 h-4 inline mr-1"></i>
                                        Recusar
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function getAdminDashboardContent() {
            const professionals = stateManager.getApprovedProfessionals();
            const totalUsers = stateManager.state.users.length;
            const totalAppointments = stateManager.state.appointments.length;
            
            return `
                <div class="min-h-screen bg-gray-50">
                    <div class="max-w-7xl mx-auto px-4 py-8">
                        <!-- Header -->
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold text-gray-900">Painel Administrativo</h1>
                            <p class="text-gray-600">Gerencie profissionais e usuários do sistema</p>
                        </div>

                        <!-- Stats -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-white p-6 rounded-lg border border-gray-300 shadow-sm">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-2xl font-bold text-gray-900">${totalUsers}</p>
                                        <p class="text-gray-600">Total de Usuários</p>
                                    </div>
                                    <i data-lucide="users" class="w-8 h-8 text-blue-600"></i>
                                </div>
                            </div>
                            <div class="bg-white p-6 rounded-lg border border-gray-300 shadow-sm">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-2xl font-bold text-gray-900">${professionals.length}</p>
                                        <p class="text-gray-600">Profissionais Cadastrados</p>
                                    </div>
                                    <i data-lucide="scissors" class="w-8 h-8 text-green-600"></i>
                                </div>
                            </div>
                            <div class="bg-white p-6 rounded-lg border border-gray-300 shadow-sm">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-2xl font-bold text-gray-900">${totalAppointments}</p>
                                        <p class="text-gray-600">Total de Agendamentos</p>
                                    </div>
                                    <i data-lucide="calendar" class="w-8 h-8 text-purple-600"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="bg-white rounded-lg border border-gray-300 shadow-sm">
                            <div class="border-b border-gray-300">
                                <div class="flex overflow-x-auto">
                                    <button id="professionals-tab" class="px-6 py-4 border-b-2 whitespace-nowrap ${stateManager.state.adminTab === 'professionals' ? 'border-black text-black font-medium' : 'text-gray-600 hover:text-black'}">
                                        <i data-lucide="scissors" class="w-4 h-4 inline mr-2"></i>
                                        Profissionais Cadastrados
                                    </button>
                                    <button id="appointments-tab" class="px-6 py-4 border-b-2 whitespace-nowrap ${stateManager.state.adminTab === 'appointments' ? 'border-black text-black font-medium' : 'text-gray-600 hover:text-black'}">
                                        <i data-lucide="calendar" class="w-4 h-4 inline mr-2"></i>
                                        Agendamentos
                                    </button>
                                </div>
                            </div>
                            
                            <div class="p-6">
                                ${getAdminTabContent()}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function getAdminTabContent() {
            const professionals = stateManager.getApprovedProfessionals();
            const appointments = stateManager.state.appointments;
            
            switch(stateManager.state.adminTab) {
                case 'professionals':
                    return `
                        <div>
                            <h2 class="text-xl font-semibold text-gray-900 mb-6">Todos os Profissionais Cadastrados</h2>
                            
                            ${professionals.length === 0 ? `
                                <div class="text-center py-12">
                                    <i data-lucide="user-x" class="w-16 h-16 text-gray-400 mx-auto mb-4"></i>
                                    <h3 class="text-lg font-medium text-gray-900 mb-2">Nenhum profissional cadastrado</h3>
                                    <p class="text-gray-600">Ainda não há profissionais cadastrados no sistema.</p>
                                </div>
                            ` : `
                                <div class="overflow-x-auto">
                                    <table class="w-full border-collapse">
                                        <thead>
                                            <tr class="border-b border-gray-300 bg-gray-50">
                                                <th class="text-left py-3 px-4 text-black font-medium">ID</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Profissional</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Salão</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Localização</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Contacto</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Serviços</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Data de Cadastro</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${professionals.map(professional => {
                                                const user = stateManager.state.users.find(u => u.id === professional.userId);
                                                const salon = stateManager.state.salons.find(s => s.id === professional.salonId);
                                                return `
                                                    <tr class="border-b border-gray-200 hover:bg-gray-50">
                                                        <td class="py-3 px-4 font-mono text-sm">${professional.id}</td>
                                                        <td class="py-3 px-4">
                                                            <div class="flex items-center gap-3">
                                                                <div class="w-10 h-10 rounded-full overflow-hidden flex-shrink-0">
                                                                    <img src="${professional.image}" alt="${professional.name}" class="w-full h-full object-cover">
                                                                </div>
                                                                <div>
                                                                    <div class="font-medium text-gray-900">${professional.name}</div>
                                                                    <div class="text-sm text-gray-600">${professional.specialty}</div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td class="py-3 px-4">
                                                            <div class="font-medium text-gray-900">${salon?.name || 'N/A'}</div>
                                                            <div class="text-sm text-gray-600">${salon?.address || 'N/A'}</div>
                                                        </td>
                                                        <td class="py-3 px-4">${salon?.location || 'N/A'}</td>
                                                        <td class="py-3 px-4">
                                                            <div class="text-sm">${salon?.phone || 'N/A'}</div>
                                                            <div class="text-xs text-gray-600">${user?.email || 'N/A'}</div>
                                                        </td>
                                                        <td class="py-3 px-4">
                                                            <div class="flex flex-wrap gap-1 max-w-xs">
                                                                ${professional.services.slice(0, 3).map(service => `
                                                                    <span class="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">${service}</span>
                                                                `).join('')}
                                                                ${professional.services.length > 3 ? `
                                                                    <span class="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">+${professional.services.length - 3}</span>
                                                                ` : ''}
                                                            </div>
                                                        </td>
                                                        <td class="py-3 px-4 text-sm">${new Date(salon?.submittedAt).toLocaleDateString('pt-BR')}</td>
                                                        <td class="py-3 px-4">
                                                            <div class="flex gap-2">
                                                                <button data-professional-id="${professional.id}" class="view-professional-details-btn border border-gray-300 hover:bg-gray-50 px-3 py-1 rounded text-sm wecut-button-hover">
                                                                    <i data-lucide="eye" class="w-4 h-4 inline mr-1"></i>
                                                                    Ver
                                                                </button>
                                                                <button data-professional-id="${professional.id}" class="remove-professional-btn bg-red-600 text-white hover:bg-red-700 px-3 py-1 rounded text-sm wecut-button-hover">
                                                                    <i data-lucide="trash-2" class="w-4 h-4 inline mr-1"></i>
                                                                    Remover
                                                                </button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                `;
                                            }).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            `}
                        </div>
                    `;
                    
                case 'appointments':
                    return `
                        <div>
                            <h2 class="text-xl font-semibold text-gray-900 mb-6">Todos os Agendamentos</h2>
                            
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                <div class="bg-white p-4 rounded-lg border border-gray-300">
                                    <p class="text-2xl font-bold text-gray-900">${appointments.length}</p>
                                    <p class="text-gray-600">Total</p>
                                </div>
                                <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-300">
                                    <p class="text-2xl font-bold text-yellow-800">${appointments.filter(a => a.status === 'pending').length}</p>
                                    <p class="text-yellow-700">Pendentes</p>
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg border border-green-300">
                                    <p class="text-2xl font-bold text-green-800">${appointments.filter(a => a.status === 'accepted').length}</p>
                                    <p class="text-green-700">Aceites</p>
                                </div>
                                <div class="bg-red-50 p-4 rounded-lg border border-red-300">
                                    <p class="text-2xl font-bold text-red-800">${appointments.filter(a => a.status === 'rejected').length}</p>
                                    <p class="text-red-700">Recusados</p>
                                </div>
                            </div>

                            ${appointments.length === 0 ? `
                                <div class="text-center py-12">
                                    <i data-lucide="calendar" class="w-16 h-16 text-gray-400 mx-auto mb-4"></i>
                                    <h3 class="text-lg font-medium text-gray-900 mb-2">Nenhum agendamento</h3>
                                    <p class="text-gray-600">Ainda não há agendamentos no sistema.</p>
                                </div>
                            ` : `
                                <div class="overflow-x-auto">
                                    <table class="w-full border-collapse">
                                        <thead>
                                            <tr class="border-b border-gray-300 bg-gray-50">
                                                <th class="text-left py-3 px-4 text-black font-medium">Código</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Cliente</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Profissional</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Serviço</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Data/Hora</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Valor</th>
                                                <th class="text-left py-3 px-4 text-black font-medium">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${appointments.map(apt => {
                                                const professional = stateManager.state.professionals.find(pro => pro.id === apt.professionalId);
                                                return `
                                                    <tr class="border-b border-gray-200 hover:bg-gray-50">
                                                        <td class="py-3 px-4 font-mono">${apt.code}</td>
                                                        <td class="py-3 px-4">
                                                            <div class="flex items-center gap-3">
                                                                <div class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center">
                                                                    <i data-lucide="user" class="w-4 h-4 text-gray-600"></i>
                                                                </div>
                                                                <span>${apt.clientName}</span>
                                                            </div>
                                                        </td>
                                                        <td class="py-3 px-4">${professional?.name || 'N/A'}</td>
                                                        <td class="py-3 px-4">${apt.service}</td>
                                                        <td class="py-3 px-4">
                                                            <div>${new Date(apt.date).toLocaleDateString('pt-BR')}</div>
                                                            <div class="text-sm text-gray-600">${apt.time}</div>
                                                        </td>
                                                        <td class="py-3 px-4">${apt.price}</td>
                                                        <td class="py-3 px-4">
                                                            <span class="px-2 py-1 rounded-full text-xs ${getAppointmentStatusBadgeClass(apt.status)}">
                                                                ${getAppointmentStatusText(apt.status)}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                `;
                                            }).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            `}
                        </div>
                    `;
                    
                default:
                    return '<p class="text-gray-600">Conteúdo não disponível</p>';
            }
        }

        function getAppointmentStatusBadgeClass(status) {
            switch(status) {
                case 'pending': return 'bg-yellow-100 text-yellow-800';
                case 'accepted': return 'bg-green-100 text-green-800';
                case 'rejected': return 'bg-red-100 text-red-800';
                case 'completed': return 'bg-blue-100 text-blue-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function getAppointmentStatusText(status) {
            switch(status) {
                case 'pending': return 'Pendente';
                case 'accepted': return 'Aceite';
                case 'rejected': return 'Recusado';
                case 'completed': return 'Concluído';
                default: return status;
            }
        }

        // Funções auxiliares
        function viewProfessional(professionalId) {
            stateManager.state.bookingProfessionalId = professionalId;
            renderView('professional-profile-page');
        }

        function startBooking(professionalId) {
            if (!stateManager.state.currentUser) {
                alert('Por favor, faça login para agendar um serviço.');
                renderView('login-page');
                return;
            }
            stateManager.state.bookingProfessionalId = professionalId;
            renderView('booking-page');
        }

        function performSearch() {
            const searchTerm = document.getElementById('search-input').value;
            alert(`Buscando por: ${searchTerm}`);
        }

        function performHomeSearch() {
            const searchTerm = document.getElementById('home-search-input').value;
            if (searchTerm) {
                stateManager.state.searchTerm = searchTerm;
                renderView('search-page');
            } else {
                alert('Por favor, digite algo para pesquisar');
            }
        }

        function showFilters() {
            alert('Mostrar filtros de busca');
        }

        function switchAppointmentTab(tab) {
            alert(`Alternando para aba: ${tab}`);
        }

        function switchProfessionalTab(tab) {
            stateManager.setProfessionalTab(tab);
            renderView('professional-dashboard-page');
        }

        function acceptAppointment(appointmentId) {
            if (stateManager.updateAppointmentStatus(appointmentId, 'accepted')) {
                alert('✅ Agendamento aceito! O cliente foi notificado.');
                renderView('professional-dashboard-page');
            }
        }

        function rejectAppointment(appointmentId) {
            if (confirm('Tem certeza que deseja recusar este agendamento?')) {
                if (stateManager.updateAppointmentStatus(appointmentId, 'rejected')) {
                    alert('❌ Agendamento recusado. O cliente foi notificado.');
                    renderView('professional-dashboard-page');
                }
            }
        }

        function switchAdminTab(tab) {
            stateManager.setAdminTab(tab);
            renderView('admin-dashboard-page');
        }

        function removeProfessional(professionalId) {
            if (!confirm('Tem certeza que deseja remover este profissional do sistema? Esta ação não pode ser desfeita.')) {
                return;
            }

            if (stateManager.removeProfessional(professionalId)) {
                alert('✅ Profissional removido com sucesso!');
                renderView('admin-dashboard-page');
            } else {
                alert('❌ Erro ao remover profissional.');
            }
        }

        function viewProfessionalDetails(professionalId) {
            const professional = stateManager.state.professionals.find(p => p.id === professionalId);
            if (!professional) return;

            const user = stateManager.state.users.find(u => u.id === professional.userId);
            const salon = stateManager.state.salons.find(s => s.id === professional.salonId);

            const modal = document.getElementById('professional-details-modal');
            const title = document.getElementById('professional-details-title');
            const content = document.getElementById('professional-details-content');

            title.textContent = `Detalhes - ${professional.name}`;
            
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-medium text-black mb-2">Informações do Profissional</h4>
                        <div class="space-y-2">
                            <p><strong>Nome:</strong> ${professional.name}</p>
                            <p><strong>Especialidade:</strong> ${professional.specialty}</p>
                            <p><strong>Avaliação:</strong> ${professional.rating} ⭐ (${professional.reviews} avaliações)</p>
                            <p><strong>Preço médio:</strong> ${professional.price}</p>
                            <p><strong>Descrição:</strong> ${professional.description}</p>
                        </div>
                        
                        <h4 class="font-medium text-black mb-2 mt-4">Informações de Contacto</h4>
                        <div class="space-y-2">
                            <p><strong>Email:</strong> ${user?.email || 'N/A'}</p>
                            <p><strong>Telefone:</strong> ${salon?.phone || 'N/A'}</p>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-medium text-black mb-2">Informações do Salão</h4>
                        <div class="space-y-2">
                            <p><strong>Nome do Salão:</strong> ${salon?.name || 'N/A'}</p>
                            <p><strong>Localização:</strong> ${salon?.location || 'N/A'}</p>
                            <p><strong>Endereço:</strong> ${salon?.address || 'N/A'}</p>
                            <p><strong>Horário:</strong> ${salon?.openingHours?.opening || '09:00'} - ${salon?.openingHours?.closing || '18:00'}</p>
                            <p><strong>Data de Cadastro:</strong> ${new Date(salon?.submittedAt).toLocaleDateString('pt-BR')}</p>
                            <p><strong>Status:</strong> <span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-800">Aprovado</span></p>
                        </div>
                        
                        <h4 class="font-medium text-black mb-2 mt-4">Serviços Oferecidos</h4>
                        <div class="flex flex-wrap gap-2">
                            ${professional.services.map(service => `
                                <span class="bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm">${service}</span>
                            `).join('')}
                        </div>
                    </div>
                </div>
                ${salon?.photos && salon.photos.length > 0 ? `
                    <div class="mt-4">
                        <h4 class="font-medium text-black mb-2">Fotos do Salão</h4>
                        <div class="grid grid-cols-3 gap-4">
                            ${salon.photos.map(photo => `
                                <img src="${photo}" alt="Foto do salão" class="w-full h-32 object-cover rounded-lg">
                            `).join('')}
                        </div>
                    </div>
                ` : ''}
            `;

            const removeBtn = document.getElementById('remove-from-details');
            removeBtn.onclick = () => {
                removeProfessional(professionalId);
                closeProfessionalDetailsModal();
            };

            modal.classList.remove('hidden');
        }

        function closeProfessionalDetailsModal() {
            document.getElementById('professional-details-modal').classList.add('hidden');
        }

        // Função para visualizar perfil do profissional
        window.viewProfessionalProfile = function() {
            const professional = stateManager.state.professionals.find(p => p.userId === stateManager.state.currentUser.id);
            const salon = stateManager.state.salons.find(s => s.userId === stateManager.state.currentUser.id);
            const user = stateManager.state.users.find(u => u.id === stateManager.state.currentUser.id);

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-black">Meu Perfil</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700">
                            <i data-lucide="x" class="w-6 h-6"></i>
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Informações Pessoais -->
                        <div class="space-y-6">
                            <div>
                                <h4 class="text-lg font-semibold text-black mb-4 border-b pb-2">Informações Pessoais</h4>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Nome Completo</label>
                                        <p class="text-black">${professional?.name || 'Não informado'}</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">E-mail</label>
                                        <p class="text-black">${user?.email || 'Não informado'}</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Especialidade</label>
                                        <p class="text-black">${professional?.specialty || 'Não informado'}</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Descrição</label>
                                        <p class="text-black">${professional?.description || 'Não informado'}</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Serviços -->
                            <div>
                                <h4 class="text-lg font-semibold text-black mb-4 border-b pb-2">Serviços Oferecidos</h4>
                                <div class="flex flex-wrap gap-2">
                                    ${professional?.services && professional.services.length > 0 
                                        ? professional.services.map(service => `
                                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">${service}</span>
                                        `).join('')
                                        : '<p class="text-gray-500">Nenhum serviço cadastrado</p>'
                                    }
                                </div>
                            </div>
                        </div>
                        
                        <!-- Informações do Salão -->
                        <div class="space-y-6">
                            <div>
                                <h4 class="text-lg font-semibold text-black mb-4 border-b pb-2">Informações do Salão</h4>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Nome do Salão</label>
                                        <p class="text-black">${salon?.name || 'Não informado'}</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Localização</label>
                                        <p class="text-black">${salon?.location || 'Não informado'}</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Endereço</label>
                                        <p class="text-black">${salon?.address || 'Não informado'}</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Telefone</label>
                                        <p class="text-black">${salon?.phone || 'Não informado'}</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700">Horário de Funcionamento</label>
                                        <p class="text-black">${salon?.openingHours?.opening || '09:00'} - ${salon?.openingHours?.closing || '18:00'}</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Fotos do Salão -->
                            <div>
                                <h4 class="text-lg font-semibold text-black mb-4 border-b pb-2">Fotos do Salão</h4>
                                ${salon?.photos && salon.photos.length > 0 
                                    ? `<div class="grid grid-cols-2 gap-4">
                                        ${salon.photos.map(photo => `
                                            <img src="${photo}" alt="Foto do salão" class="w-full h-32 object-cover rounded-lg">
                                        `).join('')}
                                       </div>`
                                    : '<p class="text-gray-500">Nenhuma foto cadastrada</p>'
                                }
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8 flex justify-end">
                        <button onclick="this.closest('.fixed').remove()" 
                                class="bg-gray-500 text-white hover:bg-gray-600 px-6 py-2 rounded-lg wecut-button-hover">
                            Fechar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Atualizar ícones
            if (window.lucide) {
                lucide.createIcons();
            }
        };

        // Função para editar perfil do profissional
        window.editProfessionalProfile = function() {
            const professional = stateManager.state.professionals.find(p => p.userId === stateManager.state.currentUser.id);
            const salon = stateManager.state.salons.find(s => s.userId === stateManager.state.currentUser.id);
            const user = stateManager.state.users.find(u => u.id === stateManager.state.currentUser.id);

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-black">Editar Perfil</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700">
                            <i data-lucide="x" class="w-6 h-6"></i>
                        </button>
                    </div>
                    
                    <form id="edit-profile-form" onsubmit="saveProfileChanges(event)">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <!-- Informações Pessoais -->
                            <div class="space-y-4">
                                <h4 class="text-lg font-semibold text-black mb-4 border-b pb-2">Informações Pessoais</h4>
                                
                                <div>
                                    <label class="block text-sm font-medium text-black mb-2">Nome Completo</label>
                                    <input type="text" id="edit-name" value="${professional?.name || ''}" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-black mb-2">E-mail</label>
                                    <input type="email" id="edit-email" value="${user?.email || ''}" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-black mb-2">Especialidade</label>
                                    <input type="text" id="edit-specialty" value="${professional?.specialty || ''}" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-black mb-2">Descrição</label>
                                    <textarea id="edit-description" rows="3"
                                              class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">${professional?.description || ''}</textarea>
                                </div>
                            </div>
                            
                            <!-- Informações do Salão -->
                            <div class="space-y-4">
                                <h4 class="text-lg font-semibold text-black mb-4 border-b pb-2">Informações do Salão</h4>
                                
                                <div>
                                    <label class="block text-sm font-medium text-black mb-2">Nome do Salão</label>
                                    <input type="text" id="edit-salon-name" value="${salon?.name || ''}" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-black mb-2">Localização</label>
                                    <input type="text" id="edit-salon-location" value="${salon?.location || ''}" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-black mb-2">Endereço</label>
                                    <input type="text" id="edit-salon-address" value="${salon?.address || ''}" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-black mb-2">Telefone</label>
                                    <input type="tel" id="edit-salon-phone" value="${salon?.phone || ''}" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-black mb-2">Horário de Abertura</label>
                                        <input type="time" id="edit-opening-time" 
                                               value="${salon?.openingHours?.opening || '09:00'}"
                                               class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-black mb-2">Horário de Fechamento</label>
                                        <input type="time" id="edit-closing-time" 
                                               value="${salon?.openingHours?.closing || '18:00'}"
                                               class="w-full p-3 border border-gray-300 rounded-lg focus:border-black focus:ring-0">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-8 flex justify-end gap-4">
                            <button type="button" onclick="this.closest('.fixed').remove()" 
                                    class="border border-gray-300 hover:bg-gray-50 px-6 py-2 rounded-lg wecut-button-hover">
                                Cancelar
                            </button>
                            <button type="submit" 
                                    class="bg-black text-white hover:bg-gray-800 px-6 py-2 rounded-lg wecut-button-hover">
                                Salvar Alterações
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Atualizar ícones
            if (window.lucide) {
                lucide.createIcons();
            }
        };

        // Função para salvar alterações do perfil
        window.saveProfileChanges = function(event) {
            event.preventDefault();
            
            const professional = stateManager.state.professionals.find(p => p.userId === stateManager.state.currentUser.id);
            const salon = stateManager.state.salons.find(s => s.userId === stateManager.state.currentUser.id);
            const user = stateManager.state.users.find(u => u.id === stateManager.state.currentUser.id);
            
            // Atualizar informações do profissional
            if (professional) {
                professional.name = document.getElementById('edit-name').value;
                professional.specialty = document.getElementById('edit-specialty').value;
                professional.description = document.getElementById('edit-description').value;
            }
            
            // Atualizar informações do usuário
            if (user) {
                user.email = document.getElementById('edit-email').value;
            }
            
            // Atualizar informações do salão
            if (salon) {
                salon.name = document.getElementById('edit-salon-name').value;
                salon.location = document.getElementById('edit-salon-location').value;
                salon.address = document.getElementById('edit-salon-address').value;
                salon.phone = document.getElementById('edit-salon-phone').value;
                salon.openingHours = {
                    opening: document.getElementById('edit-opening-time').value,
                    closing: document.getElementById('edit-closing-time').value
                };
            }
            
            // Salvar estado
            stateManager.saveState();
            
            // Fechar modal
            document.querySelector('#edit-profile-form').closest('.fixed').remove();
            
            alert('✅ Alterações salvas com sucesso!');
        };

        // Renderização de Views
        function renderView(viewName) {
            console.log(`🔄 Renderizando view: ${viewName}`);
            
            const pageContainer = document.getElementById('page-container');
            if (!pageContainer) return;

            let content = '';
            
            switch(viewName) {
                case 'home-page':
                    content = getHomePageContent();
                    break;
                case 'search-page':
                    content = getSearchPageContent();
                    break;
                case 'login-page':
                    content = getLoginPageContent();
                    break;
                case 'professional-profile-page':
                    content = getProfessionalProfileContent();
                    break;
                case 'booking-page':
                    content = getBookingPageContent();
                    break;
                case 'appointments-page':
                    content = getAppointmentsPageContent();
                    break;
                case 'professional-dashboard-page':
                    content = getProfessionalDashboardContent();
                    break;
                case 'admin-dashboard-page':
                    content = getAdminDashboardContent();
                    break;
                default:
                    content = getHomePageContent();
            }
            
            pageContainer.innerHTML = content;
            initViewListeners(viewName);
            
            // Atualizar ícones Lucide
            if (window.lucide) {
                setTimeout(() => {
                    lucide.createIcons();
                }, 100);
            }
        }

        function initViewListeners(viewName) {
            console.log(`🔧 Inicializando listeners para: ${viewName}`);
            
            switch(viewName) {
                case 'login-page':
                    initAuthListeners();
                    break;
                    
                case 'search-page':
                    const searchInput = document.getElementById('search-input');
                    if (searchInput && stateManager.state.searchTerm) {
                        searchInput.value = stateManager.state.searchTerm;
                    }
                    break;
                    
                case 'admin-dashboard-page':
                    // Adicionar listeners para as abas do admin
                    const professionalsTab = document.getElementById('professionals-tab');
                    const appointmentsTab = document.getElementById('appointments-tab');
                    
                    if (professionalsTab) {
                        professionalsTab.onclick = () => switchAdminTab('professionals');
                    }
                    if (appointmentsTab) {
                        appointmentsTab.onclick = () => switchAdminTab('appointments');
                    }
                    
                    // Adicionar listeners para botões de ação
                    setTimeout(() => {
                        document.querySelectorAll('.view-professional-details-btn').forEach(btn => {
                            btn.onclick = () => {
                                const professionalId = parseInt(btn.getAttribute('data-professional-id'));
                                viewProfessionalDetails(professionalId);
                            };
                        });
                        
                        document.querySelectorAll('.remove-professional-btn').forEach(btn => {
                            btn.onclick = () => {
                                const professionalId = parseInt(btn.getAttribute('data-professional-id'));
                                removeProfessional(professionalId);
                            };
                        });
                    }, 100);
                    break;
                    
                case 'booking-page':
                    // Atualizar resumo em tempo real
                    const updateSummary = () => {
                        const service = document.getElementById('booking-service').value;
                        const date = document.getElementById('booking-date').value;
                        const time = document.getElementById('booking-time').value;
                        
                        const summaryService = document.getElementById('summary-service');
                        const summaryDate = document.getElementById('summary-date');
                        const summaryTime = document.getElementById('summary-time');
                        const summaryPrice = document.getElementById('summary-price');
                        
                        if (summaryService) summaryService.textContent = service || '-';
                        if (summaryDate) summaryDate.textContent = date ? new Date(date).toLocaleDateString('pt-BR') : '-';
                        if (summaryTime) summaryTime.textContent = time || '-';
                        
                        if (summaryPrice) {
                            const professional = stateManager.state.professionals.find(p => p.id === stateManager.state.bookingProfessionalId);
                            summaryPrice.textContent = professional?.price || '-';
                        }
                    };
                    
                    document.getElementById('booking-service').addEventListener('change', updateSummary);
                    document.getElementById('booking-date').addEventListener('change', updateSummary);
                    document.getElementById('booking-time').addEventListener('change', updateSummary);
                    
                    // Atualizar inicialmente
                    updateSummary();
                    break;
            }
        }

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Inicializando WeCut...');
            
            // Inicializar state manager
            stateManager.init();
            
            // Renderizar view inicial
            renderView('home-page');
            
            // Inicializar navegação
            initNavbarListeners();
            
            // Atualizar UI de autenticação
            updateAuthUI();
            
            console.log('✅ WeCut inicializado com sucesso!');
        });
    </script>
</body>
</html>